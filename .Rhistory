rlang(sdfafd)
rlang::sym(sdfafd)
library(corona)
# Predict the cases
data_germany %>% predict_growth()
library(corona)
# Chunk 1
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "man/figures/README-",
out.width = "100%"
)
# Chunk 2: import-1
library(corona)
library(dplyr)
# Import the corona
data <- read_corona()
data
# Chunk 4: preprocess-corona-data
# Prepare data
data_germany <- data %>%
preprocess_corona_data(statistic = "infections",
countries = "Germany",
n = 100)
# Chunk 5: predict-model-case-numbers
# Predict the cases
data_germany %>% predict_growth()
# Chunk 6
# Data pipeline
data %>%
preprocess_corona_data(statistic = "infections",
countries = "Spain",
n = 100) %>%
predict_growth() %>%
plot_country(show_model = TRUE)
# Chunk 7
# Data pipeline
data %>%
preprocess_corona_data(statistic = "deaths",
countries = "Italy",
n = 10) %>%
predict_growth() %>%
plot_country(show_model = TRUE) +
ggplot2::ggtitle("Corona  Death Growth Curve in Italy",
subtitle = "Starte date is the first day with > 10 deaths")
# Chunk 8
data %>%
preprocess_corona_data(
countries = "Germany",
statistic = "infections",
n = 100
) %>%
lm_corona()
library(corona)
# Chunk 1
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "man/figures/README-",
out.width = "100%"
)
# Chunk 2: import-1
library(corona)
library(dplyr)
# Import the corona
data <- read_corona()
data
# Chunk 4: preprocess-corona-data
# Prepare data
data_germany <- data %>%
preprocess_corona_data(statistic = "infections",
countries = "Germany",
n = 100)
# Chunk 5: predict-model-case-numbers
# Predict the cases
data_germany %>% predict_growth()
# Chunk 6
# Data pipeline
data %>%
preprocess_corona_data(statistic = "infections",
countries = "Spain",
n = 100) %>%
predict_growth() %>%
plot_country(show_model = TRUE)
# Chunk 7
# Data pipeline
data %>%
preprocess_corona_data(statistic = "deaths",
countries = "Italy",
n = 10) %>%
predict_growth() %>%
plot_country(show_model = TRUE) +
ggplot2::ggtitle("Corona  Death Growth Curve in Italy",
subtitle = "Starte date is the first day with > 10 deaths")
# Chunk 8
data %>%
preprocess_corona_data(
countries = "Germany",
statistic = "infections",
n = 100
) %>%
lm_corona()
library(corona)
# Chunk 1
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "man/figures/README-",
out.width = "100%"
)
# Chunk 2: import-1
library(corona)
library(dplyr)
# Import the corona
data <- read_corona()
data
# Chunk 4: preprocess-corona-data
# Prepare data
data_germany <- data %>%
preprocess_corona_data(statistic = "infections",
countries = "Germany",
n = 100)
# Chunk 5: predict-model-case-numbers
# Predict the cases
data_germany %>% predict_growth()
# Chunk 6
# Data pipeline
data %>%
preprocess_corona_data(statistic = "infections",
countries = "Spain",
n = 100) %>%
predict_growth() %>%
plot_country(show_model = TRUE)
# Chunk 7
# Data pipeline
data %>%
preprocess_corona_data(statistic = "deaths",
countries = "Italy",
n = 10) %>%
predict_growth() %>%
plot_country(show_model = TRUE) +
ggplot2::ggtitle("Corona  Death Growth Curve in Italy",
subtitle = "Starte date is the first day with > 10 deaths")
# Chunk 8
data %>%
preprocess_corona_data(
countries = "Germany",
statistic = "infections",
n = 100
) %>%
lm_corona()
sym(.)
sym(x)
debugonce(lm_corona)
data %>%
preprocess_corona_data(
countries = "Germany",
statistic = "infections",
n = 100
) %>%
lm_corona()
data
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared")))
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")))
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")}))
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")})) %>%
dplyr::mutate(coef = purrr::map(.x = .data.models, .f = tibble::enframe))
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")})) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models, .f = tibble::enframe))
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")})) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models, .f = tibble::enframe))
tidyr::unnest(.data$coef)
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")})) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models, .f = tibble::enframe)) %>%
tidyr::unnest(.data$coef)
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")}))
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")})) %>%
dplyr::mutate(coef = purrr::map(.x = .data$coef, .f = tibble::enframe)) %>%
tidyr::unnest(.data$coef)
data <- corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")})) %>%
dplyr::mutate(coef = purrr::map(.x = .data$coef, .f = tibble::enframe)) %>%
tidyr::unnest(.data$coef)
suppressMessages(
data <- data %>%
tidyr::pivot_wider(names_from = .data$name,
values_from = .data$value,
names_repair = function(x) base::tolower(base::gsub(x = x, pattern = "\\(|\\)", replace = ""))) %>%
dplyr::select(-.data$data)
)
data %>%
dplyr::mutate(base_rate = 10^.data$intercept, growth_rate = 10^.data$day) %>%
dplyr::rename(lm_intercept = .data$intercept, lm_slope = .data$day)
data <- corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")})) %>%
dplyr::mutate(coef = purrr::map(.x = .data$coef, .f = tibble::enframe)) %>%
tidyr::unnest(.data$coef)
data %>%
tidyr::pivot_wider(names_from = .data$name,
values_from = .data$value,
names_repair = function(x) base::tolower(base::gsub(x = x, pattern = "\\(|\\)", replace = ""))) %>%
dplyr::select(-.data$data)
data %>%
tidyr::pivot_wider(names_from = .data$name,
values_from = .data$value,
names_repair = function(x) base::tolower(base::gsub(x = x, pattern = "\\(|\\)", replace = "")))
data
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")})) %>%
dplyr::mutate(coef = purrr::map(.x = .data$coef, .f = tibble::enframe)) %>%
tidyr::unnest(.data$coef)
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")})) %>%
dplyr::mutate(coef = purrr::map(.x = .data$coef, .f = tibble::enframe))
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")})) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models, .f = tibble::enframe))
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")})) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models, .f = tibble::enframe))
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")})) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models, .f = tibble::enframe))
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients")})) %>%
dplyr::mutate(coef = purrr::map(.x = .data$coef, .f = tibble::enframe))
data
debugonce(lm_corona)
data %>%
preprocess_corona_data(
countries = "Germany",
statistic = "infections",
n = 100
) %>%
lm_corona()
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared")))
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients") %>%
tibble::enframe(.)}))
data %>%
purrr::pluck("coefficients") %>%
tibble::enframe(.)})) %>%
tidyr::unnest(.data$coef)
data %>%
preprocess_corona_data(
countries = "Germany",
statistic = "infections",
n = 100
) %>%
lm_corona()
debugonce(lm_corona)
data %>%
preprocess_corona_data(
countries = "Germany",
statistic = "infections",
n = 100
) %>%
lm_corona()
library(corona)
library(dplyr)
# Import the corona
data <- read_corona()
data
data %>%
preprocess_corona_data(
countries = "Germany",
statistic = "infections",
n = 100
) %>%
lm_corona()
debugonce(lm_corona)
data %>%
preprocess_corona_data(
countries = "Germany",
statistic = "infections",
n = 100
) %>%
lm_corona()
corona_data %>%
tidyr::nest(data = c(.data$Lat, .data$Long, .data$date, .data$statistic, .data$day)) %>%
dplyr::mutate(models = data %>% purrr::map(function(data) stats::lm(log10(statistic) ~ day, data = data))) %>%
dplyr::mutate(r_sq = purrr::map_dbl(.data$models, function(data) summary(data) %>%
purrr::pluck("r.squared"))) %>%
dplyr::mutate(coef = purrr::map(.x = .data$models,
.f = function(data) {
data %>%
purrr::pluck("coefficients") %>%
tibble::enframe(.)})) %>%
tidyr::unnest(.data$coef)
mtcars %>%
ggplot(aes(x = wt, y = mpg)) +
geom_point()
library(ggplot2)
mtcars %>%
ggplot(aes(x = wt, y = mpg)) +
geom_point()
mtcars %>%
ggplot(aes(x = wt, y = mpg, col = am)) +
geom_point()
var <- sym(am)
var <- ensym(am)
var <- rlang::sym("am")
var
mtcars %>%
ggplot(aes(x = wt, y = mpg, col = var)) +
geom_point()
mtcars %>%
ggplot(aes(x = wt, y = mpg, col = !!var)) +
geom_point()
c("A" = 1, "B" = 3)
quantile(rnorm(100))
qntls <- quantile(rnorm(100))
var
enframe(qntls)
tibble::enframe(qntls)
qntls %>% tibble::enframe()
qntls %>% tibble::enframe(.)
var <- rlang::sym(".")
qntls %>% tibble::enframe(.)
qntls %>% tibble::enframe(!!var)
var <- rlang::sym(".")
qntls %>% tibble::enframe(!!var)
!!va
!!var
quo(.)
var <- quo(.)
qntls %>% tibble::enframe(!!var)
var <- expr(.)
qntls <- quantile(rnorm(100))
qntls %>% tibble::enframe(!!var)
var <- expr(".")
qntls <- quantile(rnorm(100))
qntls %>% tibble::enframe(!!var)
var <- ralng::enexpr(var)
var <- rlang::enexpr(var)
var
qntls %>% tibble::enframe(!!var)
library(corona)
data %>%
preprocess_corona_data(
countries = "Germany",
statistic = "infections",
n = 100
) %>%
lm_corona()
data %>%
preprocess_corona_data(
countries = "Germany",
statistic = "infections",
n = 100
) %>%
lm_corona()
data %>%
preprocess_corona_data(
countries = c("Germany", "Italy", "Spain"),
statistic = "infections",
n = 100
) %>%
lm_corona()
# Install development version from GitHub
devtools::install_github("r-lib/pkgdown")
pkgdown::build_site()
:w
library(corona)
pkgdown::build_site()
usethis::use_github_action("pkgdown")
use_github_action("pkgdown")
pkgdown::use_github_action("pkgdown")
pkgbuild::use_github_action("pkgdown")
usethis:::use_github_action(url = "https://raw.githubusercontent.com/ropenscilabs/actions_sandbox/master/.github/workflows/deploy_bookdown.yml")
library(usethis)
usethis:::use_github_action(url = "https://raw.githubusercontent.com/ropenscilabs/actions_sandbox/master/.github/workflows/deploy_bookdown.yml")
pkgdown::build_
pkgdown::build_site()
library(corona)
pkgdown::build_site()
